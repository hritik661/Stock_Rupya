# Environment Variables Setup Guide

## Quick Fix for "Email service not configured" Error

### The Problem
You're getting the error: **"Email service not configured. Please set GMAIL_USER and GMAIL_APP_PASSWORD environment variables."**

Even though you've added them to `.env.local`, the dev server hasn't picked them up yet.

### Solution: Restart the Development Server

**This is the CRITICAL step most people miss:**

1. **Stop the dev server:**
   - Press `Ctrl+C` in your terminal running the dev server
   - Wait for it to fully stop (2-3 seconds)

2. **Verify `.env.local` exists** in the project root with these exact values:
   ```
   GMAIL_USER=hritikparmar800@gmail.com
   GMAIL_APP_PASSWORD=zvpuszgvhsbcnnfs
   GMAIL_FROM_NAME=Hritik Stocks
   DATABASE_URL=postgresql://neondb_owner:npg_UBVz2pF8rnbt@ep-restless-bush-ah3czsaz-pooler.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
   NEXT_PUBLIC_SUPABASE_URL=https://ukeltuwxqbjjlzugcxpo.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_fRQ8KSv00CsiluJW02rVmw_velDR-Sh
   RAZORPAY_KEY_ID=rzp_test_SC3Un74NcXcTEm
   RAZORPAY_KEY_SECRET=8jTM6Go5nyuFVpgLb60pIhDR
   NEXT_PUBLIC_APP_ORIGIN=https://hritik.vercel.app
   NEXT_PUBLIC_RAZORPAY_ME_LINK=https://razorpay.me/@hritiksunilparmar1203
   NEXT_PUBLIC_RAZORPAY_TEST_LINK=https://rzp.io/rzp/9NJNueG
   ALLOW_ANY_OTP=false
   MASTER_OTP=123456
   ```

3. **Start the dev server again:**
   - Run `npm run dev` (or `pnpm dev` / `yarn dev`)
   - Wait for it to say: "ready - started server on 0.0.0.0:3000"

4. **Test the login:**
   - Go to http://localhost:3000
   - Try the "Send OTP" button again
   - Check the terminal for debug logs starting with `[OTP-SEND]`

### Verify Environment Variables Are Loaded

Run this command to check if your environment variables are properly loaded:

```bash
node scripts/check-env.js
```

You should see:
```
✅ REQUIRED Variables:
  ✓ GMAIL_USER: hri***com
  ✓ GMAIL_APP_PASSWORD: zvp***nfs
  ✓ DATABASE_URL: pos***ire
```

### For Production (Vercel Deployment)

1. Go to your Vercel Project Settings
2. Click **Settings → Environment Variables**
3. Add these variables exactly as shown above (copy from `.env.local`)
4. Deploy: Click **Publish** or push to Git
5. Your production app will use these variables automatically

### Troubleshooting

If you still see the error after restarting:

1. **Check `.env.local` format:**
   - No quotes around values
   - No extra spaces
   - One variable per line
   - Save the file with UTF-8 encoding

2. **Check password accuracy:**
   - Verify `GMAIL_APP_PASSWORD=zvpuszgvhsbcnnfs` is exactly as generated by Google
   - No spaces in the middle

3. **Check Gmail account:**
   - Verify 2FA is enabled on hritikparmar800@gmail.com
   - Verify this is the Gmail App Password (16 chars with spaces), not your main password

4. **Hard refresh your browser:**
   - Press `Ctrl+Shift+R` (or `Cmd+Shift+R` on Mac)
   - This clears any cached errors

### Still Not Working?

Check the server console logs for `[OTP-SEND]` debug messages. They will show:
- Which environment variables are loaded
- The exact error from Gmail SMTP
- Whether the transporter connection succeeded

If you see actual SMTP errors, your Gmail credentials might be incorrect or 2FA not enabled.

---

**Remember:** Environment variables are loaded when the dev server starts. Any changes to `.env.local` require a server restart!
